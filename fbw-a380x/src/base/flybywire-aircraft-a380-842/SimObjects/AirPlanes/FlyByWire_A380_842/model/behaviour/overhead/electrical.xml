<!-- Copyright (c) 2024 FlyByWire Simulations -->
<!-- SPDX-License-Identifier: GPL-3.0 -->

<ModelBehaviors>
    <!-- This is the base template for the A380X overhead panel electrical system -->
    <!-- It is used to define the input event source per panel for B: events -->
    <Template Name="FBW_A32NX_OVHD_ELEC_Base_Template">
        <Parameters Type="Default">
            <INPUT_EVENT_ID_SOURCE>A380X_OVHD_ELEC</INPUT_EVENT_ID_SOURCE>
        </Parameters>
        <UseTemplate Name="ASOBO_Interaction_Base_Template">
            <USE_INPUT_EVENT_ID>A380X_OVHD_ELEC</USE_INPUT_EVENT_ID>
        </UseTemplate>
    </Template>

    <!-- This is the template for the A380X overhead panel battery knob -->
    <!-- It is used to define the knob behavior itself and also its corresponding B: event info -->
    <Template Name="FBW_A380X_OVHD_BAT_Knob_Template">
        <Parameters Type="Default">
            <NODE_ID>KNOB_OVHD_BAT</NODE_ID>
            <IE_NAME>BAT_SELECTOR_KNOB</IE_NAME>
        </Parameters>
        <Parameters Type="Default">
            <ANIM_NAME>#NODE_ID#</ANIM_NAME>
            <PART_ID>#NODE_ID#</PART_ID>
            <LOCAL_VAR>A380X_OVHD_ELEC_#IE_NAME#</LOCAL_VAR>
            <!-- how fast the animation should be - the higher the number, the faster the animation -->
            <ANIM_LAG>1000</ANIM_LAG>
            <NUM_STATES>5</NUM_STATES>
            <WWISE_EVENT>turnknob</WWISE_EVENT>
            <!-- Tooltip metadata - use A380X prefix to avoid conflicts with existing asobo definitions -->
            <!-- Use @TT_Package (Marco) to reference existing tooltips from: -->
            <!-- Asobo-Official-OneStore/fs-base/en-US.locPak -->
            <TOOLTIP_TITLE>A380X.TOOLTIPS.BAT_SELECTOR_TITLE</TOOLTIP_TITLE>
            <TT_DESCRIPTION_ID>A380X.TOOLTIPS.BAT_SELECTOR_ACTION</TT_DESCRIPTION_ID>
            <TT_VALUE_0>A380X.TOOLTIPS.STATE_ESS</TT_VALUE_0>
            <TT_VALUE_1>A380X.TOOLTIPS.STATE_APU</TT_VALUE_1>
            <TT_VALUE_2>@TT_Package.GT_STATE_OFF</TT_VALUE_2>
            <TT_VALUE_3>@TT_Package.GT_STATE_1</TT_VALUE_3>
            <TT_VALUE_4>@TT_Package.GT_STATE_2</TT_VALUE_4>
            <ICON>ROTATE</ICON>
            <ARROW_TYPE>Curved</ARROW_TYPE>
            <!-- These are used to build the corresponding B: events -->
            <STR_STATE_0>ESS</STR_STATE_0>
            <STR_STATE_1>APU</STR_STATE_1>
            <STR_STATE_2>Off</STR_STATE_2>
            <STR_STATE_3>1</STR_STATE_3>
            <STR_STATE_4>2</STR_STATE_4>
            <!-- INC and DEC are automatically generated by the ASOBO_GIE_Anim_Handling behavior -->
        </Parameters>
        <UseTemplate Name="FBW_A32NX_OVHD_ELEC_Base_Template">
            <KNOB_TYPE>X_STATES</KNOB_TYPE>
            <INTERACTION_TYPE>Knob</INTERACTION_TYPE>
            <SET_STATE_EXTERNAL>(O:A380X_OVHD_ELEC_#IE_NAME#_Position) (&gt;L:#LOCAL_VAR#)</SET_STATE_EXTERNAL>
            <GET_STATE_EXTERNAL>(L:#LOCAL_VAR#, enum)</GET_STATE_EXTERNAL>
            <LOCAL_VAR_TO_WATCH_0>#LOCAL_VAR#</LOCAL_VAR_TO_WATCH_0>
        </UseTemplate>
    </Template>
</ModelBehaviors>
